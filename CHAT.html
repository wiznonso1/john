<!DOCTYPE html>
<html>
<head>
    <title>Chat App</title>
    <!-- Include Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
</head>
<body>
    <div class="container">
        <h1>Chat App</h1>
        <div id="message-container"></div>
        <div class="input-group mt-3">
            <input type="text" id="message-input" class="form-control" placeholder="Type your message...">
            <div class="input-group-append">
                <button id="send-button" class="btn btn-primary">Send</button>
            </div>
        </div>
    </div>

    <!-- Include Bootstrap JS and your custom script -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
    <script>
        // JavaScript code to handle the chat functionality
        document.addEventListener("DOMContentLoaded", function() {
            var messageContainer = document.getElementById("message-container");
            var messageInput = document.getElementById("message-input");
            var sendButton = document.getElementById("send-button");

            sendButton.addEventListener("click", function() {
                var messageText = messageInput.value;
                if (messageText !== "") {
                    // Create user message element
                    var userMessageElement = document.createElement("div");
                    userMessageElement.classList.add("alert", "alert-primary", "my-3", "text-right");
                    userMessageElement.textContent = messageText;
                    messageContainer.appendChild(userMessageElement);
                    
                    // Send the message to the API route
                    var request = new XMLHttpRequest();
                    request.open("POST", "/api");
                    request.setRequestHeader("Content-Type", "application/json");
                    request.onload = function() {
                        if (request.status === 200) {
                            // Create response message element
                            var responseMessageElement = document.createElement("div");
                            responseMessageElement.classList.add("alert", "alert-success", "my-3");
                            responseMessageElement.textContent = request.responseText;
                            messageContainer.appendChild(responseMessageElement);
                        } else {
                            // Create error message element
                            var errorMessageElement = document.createElement("div");
                            errorMessageElement.classList.add("alert", "alert-danger", "my-3");
                            errorMessageElement.textContent = "Error sending the message.";
                            messageContainer.appendChild(errorMessageElement);
                        }
                    };
                    var data = JSON.stringify({ message: messageText });
                    request.send(data);

                    messageInput.value = "";
                }
            });
        });
    </script>
</body>
</html>
